function ue(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var fe={exports:{}};(function(r){var n=function(i){var u=Object.prototype,v=u.hasOwnProperty,E=Object.defineProperty||function(t,e,o){t[e]=o.value},h,y=typeof Symbol=="function"?Symbol:{},k=y.iterator||"@@iterator",$=y.asyncIterator||"@@asyncIterator",N=y.toStringTag||"@@toStringTag";function f(t,e,o){return Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch{f=function(e,o,s){return e[o]=s}}function w(t,e,o,s){var a=e&&e.prototype instanceof z?e:z,d=Object.create(a.prototype),b=new m(s||[]);return E(d,"_invoke",{value:V(t,o,b)}),d}i.wrap=w;function I(t,e,o){try{return{type:"normal",arg:t.call(e,o)}}catch(s){return{type:"throw",arg:s}}}var g="suspendedStart",C="suspendedYield",P="executing",j="completed",A={};function z(){}function U(){}function T(){}var K={};f(K,k,function(){return this});var H=Object.getPrototypeOf,D=H&&H(H(L([])));D&&D!==u&&v.call(D,k)&&(K=D);var M=T.prototype=z.prototype=Object.create(K);U.prototype=T,E(M,"constructor",{value:T,configurable:!0}),E(T,"constructor",{value:U,configurable:!0}),U.displayName=f(T,N,"GeneratorFunction");function J(t){["next","throw","return"].forEach(function(e){f(t,e,function(o){return this._invoke(e,o)})})}i.isGeneratorFunction=function(t){var e=typeof t=="function"&&t.constructor;return e?e===U||(e.displayName||e.name)==="GeneratorFunction":!1},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,T):(t.__proto__=T,f(t,N,"GeneratorFunction")),t.prototype=Object.create(M),t},i.awrap=function(t){return{__await:t}};function F(t,e){function o(d,b,S,R){var O=I(t[d],t,b);if(O.type==="throw")R(O.arg);else{var Z=O.arg,Y=Z.value;return Y&&typeof Y=="object"&&v.call(Y,"__await")?e.resolve(Y.__await).then(function(G){o("next",G,S,R)},function(G){o("throw",G,S,R)}):e.resolve(Y).then(function(G){Z.value=G,S(Z)},function(G){return o("throw",G,S,R)})}}var s;function a(d,b){function S(){return new e(function(R,O){o(d,b,R,O)})}return s=s?s.then(S,S):S()}E(this,"_invoke",{value:a})}J(F.prototype),f(F.prototype,$,function(){return this}),i.AsyncIterator=F,i.async=function(t,e,o,s,a){a===void 0&&(a=Promise);var d=new F(w(t,e,o,s),a);return i.isGeneratorFunction(e)?d:d.next().then(function(b){return b.done?b.value:d.next()})};function V(t,e,o){var s=g;return function(d,b){if(s===P)throw new Error("Generator is already running");if(s===j){if(d==="throw")throw b;return W()}for(o.method=d,o.arg=b;;){var S=o.delegate;if(S){var R=c(S,o);if(R){if(R===A)continue;return R}}if(o.method==="next")o.sent=o._sent=o.arg;else if(o.method==="throw"){if(s===g)throw s=j,o.arg;o.dispatchException(o.arg)}else o.method==="return"&&o.abrupt("return",o.arg);s=P;var O=I(t,e,o);if(O.type==="normal"){if(s=o.done?j:C,O.arg===A)continue;return{value:O.arg,done:o.done}}else O.type==="throw"&&(s=j,o.method="throw",o.arg=O.arg)}}}function c(t,e){var o=e.method,s=t.iterator[o];if(s===h)return e.delegate=null,o==="throw"&&t.iterator.return&&(e.method="return",e.arg=h,c(t,e),e.method==="throw")||o!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+o+"' method")),A;var a=I(s,t.iterator,e.arg);if(a.type==="throw")return e.method="throw",e.arg=a.arg,e.delegate=null,A;var d=a.arg;if(!d)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,A;if(d.done)e[t.resultName]=d.value,e.next=t.nextLoc,e.method!=="return"&&(e.method="next",e.arg=h);else return d;return e.delegate=null,A}J(M),f(M,N,"Generator"),f(M,k,function(){return this}),f(M,"toString",function(){return"[object Generator]"});function l(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function p(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function m(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(l,this),this.reset(!0)}i.keys=function(t){var e=Object(t),o=[];for(var s in e)o.push(s);return o.reverse(),function a(){for(;o.length;){var d=o.pop();if(d in e)return a.value=d,a.done=!1,a}return a.done=!0,a}};function L(t){if(t){var e=t[k];if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var o=-1,s=function a(){for(;++o<t.length;)if(v.call(t,o))return a.value=t[o],a.done=!1,a;return a.value=h,a.done=!0,a};return s.next=s}}return{next:W}}i.values=L;function W(){return{value:h,done:!0}}return m.prototype={constructor:m,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(p),!t)for(var e in this)e.charAt(0)==="t"&&v.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=h)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(R,O){return d.type="throw",d.arg=t,e.next=R,O&&(e.method="next",e.arg=h),!!O}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],d=a.completion;if(a.tryLoc==="root")return o("end");if(a.tryLoc<=this.prev){var b=v.call(a,"catchLoc"),S=v.call(a,"finallyLoc");if(b&&S){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(b){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else if(S){if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o];if(s.tryLoc<=this.prev&&v.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var a=s;break}}a&&(t==="break"||t==="continue")&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var d=a?a.completion:{};return d.type=t,d.arg=e,a?(this.method="next",this.next=a.finallyLoc,A):this.complete(d)},complete:function(t,e){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&e&&(this.next=e),A},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),p(o),A}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc===t){var s=o.completion;if(s.type==="throw"){var a=s.arg;p(o)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,o){return this.delegate={iterator:L(t),resultName:e,nextLoc:o},this.method==="next"&&(this.arg=h),A}},i}(r.exports);try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}})(fe);var x=(r,n)=>`${r}-${n}-${Math.random().toString(16).slice(3,8)}`;const de=x;let te=0;var ie=({id:r,action:n,payload:i={}})=>{let u=r;return typeof u>"u"&&(u=de("Job",te),te+=1),{id:u,action:n,payload:i}},B={};let ee=!1;B.logging=ee;B.setLogging=r=>{ee=r};B.log=(...r)=>ee?console.log.apply(void 0,r):null;const he=ie,{log:q}=B,pe=x;let re=0;var ve=()=>{const r=pe("Scheduler",re),n={},i={};let u=[];re+=1;const v=()=>u.length,E=()=>Object.keys(n).length,h=()=>{if(u.length!==0){const f=Object.keys(n);for(let w=0;w<f.length;w+=1)if(typeof i[f[w]]>"u"){u[0](n[f[w]]);break}}},y=(f,w)=>new Promise((I,g)=>{const C=he({action:f,payload:w});u.push(async P=>{u.shift(),i[P.id]=C;try{I(await P[f].apply(void 0,[...w,C.id]))}catch(j){g(j)}finally{delete i[P.id],h()}}),q(`[${r}]: Add ${C.id} to JobQueue`),q(`[${r}]: JobQueue length=${u.length}`),h()});return{addWorker:f=>(n[f.id]=f,q(`[${r}]: Add ${f.id}`),q(`[${r}]: Number of workers=${E()}`),h(),f.id),addJob:async(f,...w)=>{if(E()===0)throw Error(`[${r}]: You need to have at least one worker before adding jobs`);return y(f,w)},terminate:async()=>{Object.keys(n).forEach(async f=>{await n[f].terminate()}),u=[]},getQueueLen:v,getNumWorkers:E}};function ge(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function ye(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var we=ye;const me=we;var Le=r=>{const n={};return typeof WorkerGlobalScope<"u"?n.type="webworker":me()?n.type="electron":typeof document=="object"?n.type="browser":typeof process=="object"&&typeof ge=="function"&&(n.type="node"),typeof r>"u"?n:n[r]};const Ee=Le("type")==="browser",be=Ee?r=>new URL(r,window.location.href).href:r=>r;var Se=r=>{const n={...r};return["corePath","workerPath","langPath"].forEach(i=>{r[i]&&(n[i]=be(n[i]))}),n},Oe=r=>{const n=[],i=[],u=[],v=[],E=[];return r.blocks&&r.blocks.forEach(h=>{h.paragraphs.forEach(y=>{y.lines.forEach(k=>{k.words.forEach($=>{$.symbols.forEach(N=>{E.push({...N,page:r,block:h,paragraph:y,line:k,word:$})}),v.push({...$,page:r,block:h,paragraph:y,line:k})}),u.push({...k,page:r,block:h,paragraph:y})}),i.push({...y,page:r,block:h})}),n.push({...h,page:r})}),{...r,blocks:n,paragraphs:i,lines:u,words:v,symbols:E}},se={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const ke=se;var Ae={defaultOEM:ke.DEFAULT};const Re="4.1.4",_e={version:Re};var Te={langPath:"https://tessdata.projectnaptha.com/4.0.0",workerBlobURL:!0,logger:()=>{}},$e={};const Ne=r=>new URL(r,window.location.href).href,{version:Ie}=_e,Pe=Te;var je={...Pe,workerPath:typeof process<"u"&&$e.TESS_ENV==="development"?Ne(`/dist/worker.dev.js?nocache=${Math.random().toString(36).slice(3)}`):`https://cdn.jsdelivr.net/npm/tesseract.js@v${Ie}/dist/worker.min.js`,corePath:null},Me=({workerPath:r,workerBlobURL:n})=>{let i;if(Blob&&URL&&n){const u=new Blob([`importScripts("${r}");`],{type:"application/javascript"});i=new Worker(URL.createObjectURL(u))}else i=new Worker(r);return i},Ce=r=>{r.terminate()},Ge=(r,n)=>{r.onmessage=({data:i})=>{n(i)}},Ue=async(r,n)=>{r.postMessage(n)};const Q=r=>new Promise((n,i)=>{const u=new FileReader;u.onload=()=>{n(u.result)},u.onerror=({target:{error:{code:v}}})=>{i(Error(`File could not be read! Code=${v}`))},u.readAsArrayBuffer(r)}),X=async r=>{let n=r;if(typeof r>"u")return"undefined";if(typeof r=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(r)?n=atob(r.split(",")[1]).split("").map(i=>i.charCodeAt(0)):n=await(await fetch(r)).arrayBuffer();else if(typeof HTMLElement<"u"&&r instanceof HTMLElement)r.tagName==="IMG"&&(n=await X(r.src)),r.tagName==="VIDEO"&&(n=await X(r.poster)),r.tagName==="CANVAS"&&await new Promise(i=>{r.toBlob(async u=>{n=await Q(u),i()})});else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas){const i=await r.convertToBlob();n=await Q(i)}else(r instanceof File||r instanceof Blob)&&(n=await Q(r));return new Uint8Array(n)};var De=X;const Fe=je,We=Me,Be=Ce,ze=Ge,Ke=Ue,He=De;var Ye={defaultOptions:Fe,spawnWorker:We,terminateWorker:Be,onMessage:ze,send:Ke,loadImage:He};const Je=Se,qe=Oe,_=ie,{log:oe}=B,Ve=x,{defaultOEM:Ze}=Ae,{defaultOptions:Qe,spawnWorker:Xe,terminateWorker:xe,onMessage:et,loadImage:ne,send:tt}=Ye;let ae=0;var ce=async(r={})=>{const n=Ve("Worker",ae),{logger:i,errorHandler:u,...v}=Je({...Qe,...r}),E={},h={};let y,k;const $=new Promise((c,l)=>{k=c,y=l}),N=c=>{y(c.message)};let f=Xe(v);f.onerror=N,ae+=1;const w=(c,l)=>{E[c]=l},I=(c,l)=>{h[c]=l},g=({id:c,action:l,payload:p})=>new Promise((m,L)=>{oe(`[${n}]: Start ${c}, action=${l}`),w(l,m),I(l,L),tt(f,{workerId:n,jobId:c,action:l,payload:p})}),C=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),P=c=>g(_({id:c,action:"load",payload:{options:v}})),j=(c,l,p)=>g(_({id:p,action:"FS",payload:{method:"writeFile",args:[c,l]}})),A=(c,l)=>g(_({id:l,action:"FS",payload:{method:"readFile",args:[c,{encoding:"utf8"}]}})),z=(c,l)=>g(_({id:l,action:"FS",payload:{method:"unlink",args:[c]}})),U=(c,l,p)=>g(_({id:p,action:"FS",payload:{method:c,args:l}})),T=(c="eng",l)=>g(_({id:l,action:"loadLanguage",payload:{langs:c,options:v}})),K=(c="eng",l=Ze,p,m)=>g(_({id:m,action:"initialize",payload:{langs:c,oem:l,config:p}})),H=(c={},l)=>g(_({id:l,action:"setParameters",payload:{params:c}})),D=async(c,l={},p={blocks:!0,text:!0,hocr:!0,tsv:!0},m)=>g(_({id:m,action:"recognize",payload:{image:await ne(c),options:l,output:p}})),M=(c="Tesseract OCR Result",l=!1,p)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),g(_({id:p,action:"getPDF",payload:{title:c,textonly:l}}))),J=async(c,l)=>g(_({id:l,action:"detect",payload:{image:await ne(c)}})),F=async()=>(f!==null&&(xe(f),f=null),Promise.resolve());et(f,({workerId:c,jobId:l,status:p,action:m,data:L})=>{if(p==="resolve"){oe(`[${c}]: Complete ${l}`);let W=L;m==="recognize"?W=qe(L):m==="getPDF"&&(W=Array.from({...L,length:Object.keys(L).length})),E[m]({jobId:l,data:W})}else if(p==="reject")if(h[m](L),m==="load"&&y(L),u)u(L);else throw Error(L);else p==="progress"&&i({...L,userJobId:l})});const V={id:n,worker:f,setResolve:w,setReject:I,load:C,writeText:j,readText:A,removeFile:z,FS:U,loadLanguage:T,initialize:K,setParameters:H,recognize:D,getPDF:M,detect:J,terminate:F};return P().then(()=>k(V)).catch(()=>{}),$};const le=ce,rt=async(r,n,i)=>{const u=await le(i);return await u.loadLanguage(n),await u.initialize(n),u.recognize(r).finally(async()=>{await u.terminate()})},ot=async(r,n)=>{const i=await le(n);return await i.loadLanguage("osd"),await i.initialize("osd"),i.detect(r).finally(async()=>{await i.terminate()})};var nt={recognize:rt,detect:ot},at={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},it={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const st=ve,ct=ce,lt=nt,ut=at,ft=se,dt=it,{setLogging:ht}=B;var pt={languages:ut,OEM:ft,PSM:dt,createScheduler:st,createWorker:ct,setLogging:ht,...lt};const vt=ue(pt);export{vt as T,ue as g};
